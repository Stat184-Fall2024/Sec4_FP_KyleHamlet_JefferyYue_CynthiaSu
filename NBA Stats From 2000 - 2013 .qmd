---
title: "NBA Stats From 2000 - 2023"
format: pdf
editor: visual
---

# Research Question 1: Is a playerâ€™s 3-point shooting percentage related to free throw shooting percentage?

This research examines the relationship between 3-point shooting and free-throw shooting. Understanding this correlation may provide insights into how shooting mechanics or player training affect performance in these distinct areas.

### Data

We get the NBA player statistics from 1999 to 2023 from the NBA website. The data was collected by NBA analysts.

The data meets the FAIR principles:

-   Findable: The dataset has clear identifiers and structured attributes.

-   Accessible: The dataset is standard tabular data, which can be saved as CSV file.

-   Interoperable: Data column names and values align with standard basketball statistical terminology.

-   Reusable: The dataset has vary variables from multiple years, and it's convinient to do different analyses.

Our research research about the correlation between the 3-point goal percentage (3P%) and free throw goal percentage (FT%). These two attributes are part of dataset.

### Data Visualization

```{r,echo=FALSE,warning=FALSE,message=FALSE}
library(tidyverse)
library(ggplot2)

player_data <- read.csv("NBA Players 1999-2023 - Sheet1.csv")
cleaned_data <- player_data %>%
  select(`Player`,`X3P.`, `FT.`) %>%
  rename(player_name = `Player`,three_point_pct = `X3P.`, free_throw_pct = `FT.`) %>%
  drop_na()
```

```{r,echo=FALSE,warning=FALSE,message=FALSE}
#| label: fig-3point-dist
#| fig-cap: "Distribution of 3-Point Percentage"
#| echo: false
#| warning: false
#| message: false

ggplot(cleaned_data, aes(x = three_point_pct)) +
  geom_histogram(binwidth = 0.05, fill = "blue", color = "black") +
  labs(x = "3-Point Percentage", y = "Frequency") +
  theme_minimal()
```

```{r,echo=FALSE,warning=FALSE,message=FALSE}
#| label: fig-ftdist
#| fig-cap: "Distribution of Free Throw Percentage"
#| echo: false
#| warning: false
#| message: false

ggplot(cleaned_data, aes(x = free_throw_pct)) +
  geom_histogram(binwidth = 0.05, fill = "green", color = "black") +
  labs(x = "Free Throw Percentage", y = "Frequency") +
  theme_minimal()

```

```{r,echo=FALSE,warning=FALSE,message=FALSE}
#| label: fig-scatter
#| fig-cap: "Scatter Plot of 3-Point Percentage vs Free Throw Percentage"
#| echo: false
#| warning: false
#| message: false

ggplot(cleaned_data, aes(x = free_throw_pct, y = three_point_pct)) +
  geom_point(color = "blue",alpha=0.5) + 
  geom_smooth(method = "lm", se = FALSE, color = "black") +  
  labs(
    title = "Scatter Plot of 3-Point Percentage vs Free Throw Percentage",
    x = "Free Throw Percentage",
    y = "3-Point Percentage"
  ) +
  theme_minimal()

```

[@fig-3point-dist]

The distribution of 3-point percentages is right-skewed, with the majority of players concentrated between 0.2 and 0.35, and a notable cluster at 0.0 (players with no successful 3-point shots).

[@fig-ftdist]

The distribution of free throw percentages is left-skewed, with most players concentrated between 0.7 and 0.9, indicating a higher proficiency in free throws compared to 3-point shooting.

[@fig-scatter]

While the regression line shows a positive trend, the slope is quite shallow, indicating a relatively weak correlation between these two metrics.

### Result Analysis

We did Pearsonr correlation test between 3-point percentage and free throw percentage, and got the following result:

```{r,echo=FALSE,warning=FALSE,message=FALSE}
#| label: correlation-test
#| echo: false
#| warning: false
#| message: false

correlation <- cor.test(cleaned_data$three_point_pct, cleaned_data$free_throw_pct, method = "pearson")

correlation_result <- paste0(
  "Pearson correlation coefficient: r = ", round(correlation$estimate, 2),
  ", p-value = ", signif(correlation$p.value, 3)
)

correlation_result
```

The Pearson correlation test between 3-point percentage and free throw percentage shows a correlation coefficient of 0.26 and a p-value of 4.22e-156. This indicates a weak positive correlation between the two variables. While the correlation is not strong, the extremely small p-value suggests that the relationship is statistically significant and not due to random chance. In practical terms, this means that players who perform better at free throws tend to have slightly better 3-point shooting percentages, but the connection between the two skills is limited. This result highlights that while both skills involve shooting mechanics, they are likely influenced by different factors such as shot distance, player roles, and situational conditions during games.


# Research Question 2: How Does Age Impact Individual Player Statistics?

This research question examines the correlation between a player's age and their individual player statistics.

## Data

Similarly to the first research question the data was taken from NBA player statistics from 1999 to 2023 from the NBA website. As stated above, the data meets the FAIR principles.

### Load Package

```{r}

library(tidyverse)
library(dplyr)
library(ggplot2)

```

### Data Loading & Preprocessing

```{r}

NBAplayers = read.csv("NBA Players 1999-2023 - Sheet1.csv")

view(NBAplayers)

```

```{r}

NBAplayers3 <- NBAplayers %>%
  #Drop unnecessary columns
  select(-c(1, 4, 5, 9:21, 24, 29))

#Avg points per game
Ageppg <- NBAplayers3 %>%
  group_by(NBAplayers3[c(2)]) %>%
  summarise(Avgppg = mean(PTS, na.rm = TRUE))

#Avg Assists Per Game
Ageast <- NBAplayers3 %>%
  group_by(NBAplayers3[c(2)]) %>%
  summarise(Avgast = mean(AST, na.rm = TRUE))

#Avg Offensive Rebounds
Ageorb <- NBAplayers3 %>%
  group_by(NBAplayers3[c(2)]) %>%
  summarise(Avgorb = mean(ORB, na.rm = TRUE))

#Avg Defensive Rebounds
Agedrb <- NBAplayers3 %>%
  group_by(NBAplayers3[c(2)]) %>%
  summarise(Avgdrb = mean(DRB, na.rm = TRUE))

```

```{r}

#Agestat dataframe
Agestat = data.frame(Ageppg,Ageast[-c(1)],
Ageorb[-c(1)],Agedrb[-c(1)])

View(Agestat)

```

### Data Exploration

#### Player Age VS Average Points Per Game

```{r}

ggplot(
  data = Agestat,
  aes(x=Age..,y=Avgppg,fill=Age..)
) + geom_bar(stat = "identity", width = 0.5) +
geom_smooth(aes(group = 1), method = "lm", se = TRUE, color = "blue") +
labs(x = "Player Age",y = "Average Points Per Game", 
title = "Average Points Scored at Different Ages in the NBA")

```

#### Player Age VS Average Assists Per Game

```{r}

ggplot(data = Agestat,
       aes(x=Age..,y=Avgast,fill=Age..)
) + geom_bar(stat = "identity", width = 0.5) + 
geom_smooth(aes(group = 1), method = "lm", se = TRUE, color = "blue") +
  labs(x = "Player Age", y = "Average Assists Per Game",
       title = "Average Assists Made at Different Ages in the NBA")

```

#### Player Age VS Average Rebounds Per Game

```{r}

ggplot(data = Agestat,
       aes(x=Age..,y=(Avgorb+Avgdrb),fill=Age..)
) + geom_bar(stat = "identity", width = 0.5) + 
geom_smooth(aes(group = 1, y = (Avgorb + Avgdrb)), method = "lm", se = TRUE, color = "blue") +
  labs(x = "Player Age", y = "Average Rebounds Per Game",
       title = "Average Rebounds at Different Ages in the NBA")

```



### Appendix

```{r, codeAppend,ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}

library(tidyverse)
player_data <- read.csv("NBA Players 1999-2023 - Sheet1.csv")
cleaned_data <- player_data %>%
  select(`Player`,`X3P.`, `FT.`) %>%
  rename(player_name = `Player`,three_point_pct = `X3P.`, free_throw_pct = `FT.`) %>%
  drop_na()

ggplot(cleaned_data, aes(x = free_throw_pct, y = three_point_pct)) +
  geom_point(alpha = 0.7) +
  labs(
    title = "Scatter Plot of 3-Point Percentage vs Free Throw Percentage",
    x = "Free Throw Percentage",
    y = "3-Point Percentage"
  ) +
  theme_minimal()


correlation <- cor.test(cleaned_data$three_point_pct, cleaned_data$free_throw_pct, method = "pearson")


if (correlation$p.value < 0.05) {
  cat("Found significant correlation between 3-point shooting percentage and free throw shooting percentage (r =", round(correlation$estimate, 2), ").")
} else {
  cat("Found no significant correlation between 3-point shooting percentage and free throw shooting percentage.")
}

```



